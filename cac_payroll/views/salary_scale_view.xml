<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="salary_scale_view_form" model="ir.ui.view">
            <field name="name">salary.scale.view.form</field>
            <field name="model">salary.scale</field>
            <field name="arch" type="xml">
                <form string="">
                    <header>
                        <button name="%(salary_scale_wiz_action)d" string="Create Next Salary Scale"
                                class="oe_highlight" type="action"/>
                        <button name="action_approve" string="Approve" class="oe_highlight" states="draft" type="object"
                                groups="cac_payroll.access_approve_salary_scale"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,approved"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" required="1" attrs="{'readonly':[('state','=','approved')]}"/>
                                <field name="general_ratio_id" required="1"
                                       attrs="{'readonly':[('state','=','approved')]}"
                                       options="{'no_create_edit': True, 'no_open':True,'no_create':True}"/>
                                <field name="year" required="1" placeholder="20/21"
                                       attrs="{'readonly':[('state','=','approved')]}"/>
                                <field name="no_of_steps" required="1" attrs="{'readonly':[('state','=','approved')]}"/>
                                <field name="step_name_type" required="1"
                                       attrs="{'readonly':[('state','=','approved')]}"/>
                                <field name="number_digits"
                                       attrs="{'invisible':[('step_name_type','!=','number')],'required':[('step_name_type','=','number')]}"/>
                                <field name="is_gss_scale"/>
                                <field name="type_of_increase"
                                       attrs="{'readonly':[('state','=','approved')],'required':[('is_gss_scale','=',False)],'invisible':[('is_gss_scale','=',True)]}"/>
                                <field name="in_ratio"
                                       attrs="{'required':[('type_of_increase','=','ratio'),('is_gss_scale','!=',True)],'invisible': [('type_of_increase','=','number'),('is_gss_scale','=',True)],'readonly':[('state','=','approved')]}"/>
                                <field name="in_number"
                                       attrs="{'required':[('type_of_increase','=','number'),('is_gss_scale','!=',True)],'invisible': [('type_of_increase','=','ratio'),('is_gss_scale','=',True)],'readonly':[('state','=','approved')]}"/>

                            </group>
                            <group>
                                <field name="annual_increase_ratio" force_save="1" readonly="1"/>
                                <field name="cost_of_living" force_save="1" readonly="1" invisible="0"/>
                                <!-- <field name="increase_amount" required="1" attrs="{'readonly':[('state','=','approved')]}"/> -->
                                <field name="max_step_for_new_hire" required="1"
                                       attrs="{'readonly':[('state','=','approved')]}"
                                       string="Maximum Entry Placement"/>
                                <field name="start_date"/>
                                <field name="end_date"/>
                                <field name="currency_id"/>
                            </group>
                        </group>
                        <notebook attrs="{'invisible':[('is_gss_scale','=',False)]}">
                            <page string="Type of Increase">
                                <field name="type_of_increase_id" force_save="1">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="type_of_increase" required="1"
                                        />
                                        <field name="senior_rate"/>
                                        <field name="max_step_for_increase"/>

                                        <field name="in_ratio"
                                               attrs="{'required':[('type_of_increase','=','ratio')],'invisible': [('type_of_increase','=','number')],}"/>
                                        <field name="in_number"
                                               attrs="{'required':[('type_of_increase','=','number')],'invisible': [('type_of_increase','=','ratio')]}"/>
                                        <field name="total_amount"
                                               attrs="{'required':[('type_of_increase','=','number')],'invisible': [('type_of_increase','=','ratio')]}"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="salary_scale_view_tree" model="ir.ui.view">
            <field name="name">salary.scale.tree</field>
            <field name="model">salary.scale</field>
            <field name="arch" type="xml">
                <tree string="">
                    <field name="name"/>
                    <field name="year"/>
                    <field name="no_of_steps"/>
                    <field name="annual_increase_ratio"/>
                    <field name="cost_of_living" invisible="0"/>
                    <field name="general_ratio_id"/>
                    <field name="max_step_for_new_hire"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="salary_scale_action" model="ir.actions.act_window">
            <field name="name">Salary Scale</field>
            <field name="res_model">salary.scale</field>
            <field name="view_mode">tree,form</field>
            <field name="target">current</field>
        </record>


        <!-- This Menu Item For Salary Scale -->
        <menuitem id="salary_scale_menu"
                  name="Salary Scale"
                  parent="hr.menu_human_resources_configuration"
                  action="salary_scale_action"
                  sequence="10"/>

    </data>
</odoo>
